<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="fleet_vehicle_view_form_inherit_hr" model="ir.ui.view">
        <field name="name">fleet.vehicle.form.inherit.hr</field>
        <field name="model">fleet.vehicle</field>
        <field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
        <field name="arch" type="xml">

            <button name="return_action_to_open"  position="after">
                <button name="return_action_to_open_repair" 
                            type="object"
                            class="oe_stat_button"
                            icon="fa-dollar"
                            width="230"
                            context="{'xml_id':'fleet_vehicle_log_repair_action'}"
                            >
                            <field name="repair_count" widget="statinfo" string="Reparación/Consumos"/>
                        </button>                 
            </button>
            <field name="driver_id" position="replace">
                <field name="driver_id" domain="['|', ('company_id', '=', False ), ('company_id', '=', company_id), ('is_driver', '=', True)]"/>
            </field>
            <field name="future_driver_id" position="replace">
                <field name="future_driver_id" domain="['|', ('company_id', '=', False ), ('company_id', '=', company_id), ('is_driver', '=', True)]"/>
            </field>
            <field name="mobility_card" position="replace">
                <field name="mobility_card" string="No. licencia conducir" readonly="1"/>
            </field>

            <group col="2" position="after">
                <group string="Asignación de complementos">
                    <field name="assignment_parts_ids" nolabel="1">
                        <tree editable="bottom">
                            <field name="vehicle_id" invisible="1" />
                            <field name="company_id" invisible="1" />
                            <field name="product_id" domain="[('vehicle_complement', '=', True)]" />
                            <field name="product_qty" />
                            <field name="product_uom" />
                            <field name="unit_cost" width="1.1"/>
                        </tree>
                    </field>
                </group>
            </group>
        </field>
    </record>

    <record id="fleet_vehicle_log_services_view_form_ba" model="ir.ui.view">
        <field name="name">fleet.vehicle.log.services.form</field>
        <field name="model">fleet.vehicle.log.services</field>
        <field name="inherit_id" ref="fleet.fleet_vehicle_log_services_view_form"/>
        <field name="arch" type="xml">
            <field name="purchaser_id" position="replace">
                <field name="purchaser_id" domain="[('is_driver', '=', True)]"/>
            </field>
        </field>
    </record>

    <record id="fleet_vehicle_odometer_view_tree_ba" model="ir.ui.view">
        <field name="name">fleet.vehicle.odometer.form</field>
        <field name="model">fleet.vehicle.odometer</field>
        <field name="inherit_id" ref="fleet.fleet_vehicle_odometer_view_tree"/>
        <field name="arch" type="xml">
            <field name="driver_id" position="replace">
                <field name="driver_id" domain="[('is_driver', '=', True)]"/>
            </field>
        </field>
    </record>


    <menuitem id="driver_menu_ba"
            name="Conductores"
            parent="fleet.fleet_vehicles"
            action="ba_customs.res_partner_action_driver_ba"
            sequence="2"/>

    <menuitem id="suppliers_menu_ba"
            name="Insumos automotrices"
            parent="fleet.fleet_vehicles"
            action="ba_customs.product_template_action_vehicle_ba"
            sequence="2"/>

</odoo>
